<!DOCTYPE html>
<html lang="ko">

<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>ì˜¤ëŠ˜ ë­ ë¨¹ì§€?</title>
Â  <style>
Â  Â  body {
Â  Â  Â  font-family: 'Segoe UI', sans-serif;
Â  Â  Â  margin: 0;
Â  Â  Â  padding: 0;
Â  Â  Â  background-color: #fffdfa;
Â  Â  Â  color: #333;
Â  Â  }

Â  Â  header {
Â  Â  Â  background-color: #ffb84d;
Â  Â  Â  padding: 20px;
Â  Â  Â  text-align: center;
Â  Â  Â  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
Â  Â  }

Â  Â  header h1 {
Â  Â  Â  margin: 0;
Â  Â  Â  font-size: 2.5rem;
Â  Â  Â  color: #fff;
Â  Â  }

Â  Â  main {
Â  Â  Â  padding: 20px;
Â  Â  Â  max-width: 1000px;
Â  Â  Â  margin: auto;
Â  Â  }

Â  Â  section {
Â  Â  Â  margin-bottom: 40px;
Â  Â  }

Â  Â  .section-title {
Â  Â  Â  font-size: 1.6rem;
Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  border-bottom: 2px solid #ffb84d;
Â  Â  Â  padding-bottom: 5px;
Â  Â  }

Â  Â  #ingredient-search input {
Â  Â  Â  padding: 12px;
Â  Â  Â  font-size: 18px;
Â  Â  Â  width: 280px;
Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  border-radius: 4px;
Â  Â  }

Â  Â  #ingredient-search button {
Â  Â  Â  padding: 12px 18px;
Â  Â  Â  font-size: 18px;
Â  Â  Â  background-color: #ffb84d;
Â  Â  Â  color: white;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 4px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  margin-left: 5px;
Â  Â  }

Â  Â  .grid {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
Â  Â  Â  gap: 20px;
Â  Â  }

Â  Â  .meal {
Â  Â  Â  background-color: #fff;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  overflow: hidden;
Â  Â  Â  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
Â  Â  Â  text-align: center;
Â  Â  Â  transition: transform 0.2s ease-in-out;
Â  Â  }

Â  Â  .meal:hover {
Â  Â  Â  transform: scale(1.03);
Â  Â  }

Â  Â  .meal img {
Â  Â  Â  width: 100%;
Â  Â  Â  height: auto;
Â  Â  Â  object-fit: cover;
Â  Â  Â  border-bottom: 1px solid #eee;
Â  Â  }

Â  Â  .meal h3 {
Â  Â  Â  font-size: 1rem;
Â  Â  Â  margin: 10px 0;
Â  Â  }

Â  Â  .favorite {
Â  Â  Â  background: none;
Â  Â  Â  border: none;
Â  Â  Â  font-size: 1.2rem;
Â  Â  Â  cursor: pointer;
Â  Â  Â  margin-bottom: 10px;
Â  Â  }

Â  Â  .category-button {
Â  Â  Â  padding: 10px 14px;
Â  Â  Â  font-size: 15px;
Â  Â  Â  margin: 5px;
Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  border-radius: 5px;
Â  Â  Â  background-color: white;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .category-button:hover {
Â  Â  Â  background-color: #ffe0b3;
Â  Â  }

Â  Â  #modal {
Â  Â  Â  position: fixed;
Â  Â  Â  top: 20%;
Â  Â  Â  left: 20%;
Â  Â  Â  background: white;
Â  Â  Â  border: 1px solid black;
Â  Â  Â  padding: 20px;
Â  Â  Â  z-index: 10;
Â  Â  Â  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
Â  Â  }

Â  Â  .hidden {
Â  Â  Â  display: none;
Â  Â  }

Â  Â  @media (max-width: 768px) {
Â  Â  Â  header h1 {
Â  Â  Â  Â  font-size: 2rem;
Â  Â  Â  }

Â  Â  Â  #ingredient-search input,
Â  Â  Â  #ingredient-search button {
Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  }

Â  Â  Â  .meal h3 {
Â  Â  Â  Â  font-size: 0.95rem;
Â  Â  Â  }

Â  Â  Â  .favorite {
Â  Â  Â  Â  font-size: 1rem;
Â  Â  Â  }
Â  Â  }
Â  </style>
</head>

<body>

Â  <header>
Â  Â  <h1>ì˜¤ëŠ˜ ë­ ë¨¹ì§€?</h1>
Â  </header>

Â  <main>

Â  Â  <section>
Â  Â  Â  <h2 class="section-title">ğŸ¥˜ ì˜¤ëŠ˜ì˜ ì¶”ì²œ ë ˆì‹œí”¼</h2>
Â  Â  Â  <div id="today-meal"></div>
Â  Â  Â  <button onclick="pickRandomMeal()">ğŸ² ëœë¤ ì¶”ì²œ</button>
Â  Â  </section>

Â  Â  <section>
Â  Â  Â  <h2 class="section-title">ğŸ” ì¬ë£Œë¡œ ë ˆì‹œí”¼ ì°¾ê¸°</h2>
Â  Â  Â  <div id="ingredient-search">
Â  Â  Â  Â  <input type="text" id="ingredientInput" placeholder="ì˜ˆ: chicken, onion">
Â  Â  Â  Â  <button onclick="searchByIngredient()">ì¬ë£Œë¡œ ì°¾ê¸°</button>
Â  Â  Â  </div>
Â  Â  </section>

Â  Â  <section>
Â  Â  Â  <h2 class="section-title">ğŸ“‚ ì¹´í…Œê³ ë¦¬ë³„ ë³´ê¸°</h2>
Â  Â  Â  <div id="category-buttons" class="grid"></div>
Â  Â  </section>

Â  Â  <section>
Â  Â  Â  <h2 class="section-title">ğŸ“‹ ì „ì²´ ìŒì‹ ëª©ë¡</h2>
Â  Â  Â  <div id="meal-list" class="grid"></div>
Â  Â  </section>

Â  Â  <section>
Â  Â  Â  <h2 class="section-title">â¤ï¸ ì¦ê²¨ì°¾ê¸°í•œ ë ˆì‹œí”¼</h2>
Â  Â  Â  <div id="favorite-list" class="grid"></div>
Â  Â  </section>

Â  </main>

Â  <div id="modal" class="hidden">
Â  Â  <div id="modal-content"></div>
Â  Â  <button onclick="closeModal()">ë‹«ê¸°</button>
Â  </div>

Â  <script>
Â  Â  const mealList = document.getElementById("meal-list");
Â  Â  const todayMealDiv = document.getElementById("today-meal");
Â  Â  const modal = document.getElementById("modal");
Â  Â  const modalContent = document.getElementById("modal-content");

Â  Â  function getFavorites() {
Â  Â  Â  return JSON.parse(localStorage.getItem("favorites") || "[]");
Â  Â  }

Â  Â  function saveFavorites(favs) {
Â  Â  Â  localStorage.setItem("favorites", JSON.stringify(favs));
Â  Â  }

Â  Â  async function loadCategories() {
Â  Â  Â  const res = await fetch("https://www.themealdb.com/api/json/v1/1/categories.php");
Â  Â  Â  const data = await res.json();
Â  Â  Â  const container = document.getElementById("category-buttons");

Â  Â  Â  data.categories.forEach(cat => {
Â  Â  Â  Â  const btn = document.createElement("button");
Â  Â  Â  Â  btn.className = "category-button";
Â  Â  Â  Â  btn.textContent = cat.strCategory;
Â  Â  Â  Â  btn.onclick = () => fetchMealsByCategory(cat.strCategory);
Â  Â  Â  Â  container.appendChild(btn);
Â  Â  Â  });
Â  Â  }

Â  Â  async function fetchMealsByCategory(category) {
Â  Â  Â  const res = await fetch(`https://www.themealdb.com/api/json/v1/1/filter.php?c=${category}`);
Â  Â  Â  const data = await res.json();
Â  Â  Â  mealList.innerHTML = "";
Â  Â  Â  for (let item of data.meals) {
Â  Â  Â  Â  const mealData = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${item.idMeal}`);
Â  Â  Â  Â  const meal = (await mealData.json()).meals[0];
Â  Â  Â  Â  displayMeal(meal, mealList);
Â  Â  Â  }
Â  Â  }

Â  Â  async function searchByIngredient() {
Â  Â  Â  const input = document.getElementById("ingredientInput").value.trim();
Â  Â  Â  if (!input) {
Â  Â  Â  Â  alert("ì¬ë£Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  const res = await fetch(`https://www.themealdb.com/api/json/v1/1/filter.php?i=${input}`);
Â  Â  Â  const data = await res.json();
Â  Â  Â  mealList.innerHTML = "";
Â  Â  Â  if (!data.meals) {
Â  Â  Â  Â  mealList.innerHTML = "<p>í•´ë‹¹ ì¬ë£Œë¡œ ë§Œë“  ìŒì‹ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>";
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  for (let item of data.meals) {
Â  Â  Â  Â  const mealData = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${item.idMeal}`);
Â  Â  Â  Â  const meal = (await mealData.json()).meals[0];
Â  Â  Â  Â  displayMeal(meal, mealList);
Â  Â  Â  }
Â  Â  }

Â  Â  function displayMeal(meal, target) {
Â  Â  Â  const div = document.createElement("div");
Â  Â  Â  div.className = "meal";
Â  Â  Â  div.innerHTML = `
Â  Â  Â  Â  <img src="${meal.strMealThumb}" onclick="showDetails(${meal.idMeal})" />
Â  Â  Â  Â  <h3>${meal.strMeal}</h3>
Â  Â  Â  Â  <button class="favorite" onclick="toggleFavorite(${meal.idMeal})">
Â  Â  Â  Â  Â  ${isFavorite(meal.idMeal) ? "â¤ï¸" : "ğŸ¤"}
Â  Â  Â  Â  </button>
Â  Â  Â  `;
Â  Â  Â  target.appendChild(div);
Â  Â  }

Â  Â  async function showDetails(id) {
Â  Â  Â  const res = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`);
Â  Â  Â  const meal = (await res.json()).meals[0];
Â  Â  Â  modalContent.innerHTML = `
Â  Â  Â  Â  <h2>${meal.strMeal}</h2>
Â  Â  Â  Â  <img src="${meal.strMealThumb}" width="200">
Â  Â  Â  Â  <p><strong>Ingredients:</strong></p>
Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  ${[...Array(20).keys()]
Â  Â  Â  Â  Â  Â  .map(i => meal[`strIngredient${i+1}`] ? `<li>${meal[`strIngredient${i+1}`]} - ${meal[`strMeasure${i+1}`]}</li>` : '')
Â  Â  Â  Â  Â  Â  .join('')}
Â  Â  Â  Â  </ul>
Â  Â  Â  Â  <p><strong>Instructions:</strong></p>
Â  Â  Â  Â  <p>${meal.strInstructions}</p>
Â  Â  Â  `;
Â  Â  Â  modal.classList.remove("hidden");
Â  Â  }

Â  Â  function closeModal() {
Â  Â  Â  modal.classList.add("hidden");
Â  Â  }

Â  Â  function toggleFavorite(id) {
Â  Â  Â  let favs = getFavorites();
Â  Â  Â  if (favs.includes(id)) {
Â  Â  Â  Â  favs = favs.filter(x => x !== id);
Â  Â  Â  } else {
Â  Â  Â  Â  favs.push(id);
Â  Â  Â  }
Â  Â  Â  saveFavorites(favs);
Â  Â  Â  loadFavorites();
Â  Â  Â  showTodayMeal();
Â  Â  }

Â  Â  function isFavorite(id) {
Â  Â  Â  const favs = getFavorites();
Â  Â  Â  return favs.includes(id);
Â  Â  }

Â  Â  async function showTodayMeal() {
Â  Â  Â  const today = new Date().toDateString();
Â  Â  Â  const savedDate = localStorage.getItem("lastDate");
Â  Â  Â  let mealId = localStorage.getItem("todayMeal");

Â  Â  Â  if (today !== savedDate) {
Â  Â  Â  Â  const favs = getFavorites();
Â  Â  Â  Â  if (favs.length > 0) {
Â  Â  Â  Â  Â  mealId = favs[Math.floor(Math.random() * favs.length)];
Â  Â  Â  Â  Â  localStorage.setItem("todayMeal", mealId);
Â  Â  Â  Â  Â  localStorage.setItem("lastDate", today);
Â  Â  Â  Â  }
Â  Â  Â  }

Â  Â  Â  if (mealId) {
Â  Â  Â  Â  const res = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${mealId}`);
Â  Â  Â  Â  const meal = (await res.json()).meals[0];
Â  Â  Â  Â  todayMealDiv.innerHTML = `
Â  Â  Â  Â  Â  <h2>${meal.strMeal}</h2>
Â  Â  Â  Â  Â  <img src="${meal.strMealThumb}" width="200" />
Â  Â  Â  Â  `;
Â  Â  Â  } else {
Â  Â  Â  Â  todayMealDiv.innerHTML = "<p>ì¢‹ì•„ìš”í•œ ë ˆì‹œí”¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
Â  Â  Â  }
Â  Â  }

Â  Â  async function loadFavorites() {
Â  Â  Â  const favs = getFavorites();
Â  Â  Â  const favContainer = document.getElementById("favorite-list");
Â  Â  Â  favContainer.innerHTML = "";

Â  Â  Â  for (let id of favs) {
Â  Â  Â  Â  const res = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`);
Â  Â  Â  Â  const meal = (await res.json()).meals[0];
Â  Â  Â  Â  displayMeal(meal, favContainer);
Â  Â  Â  }
Â  Â  }

Â  Â  function pickRandomMeal() {
Â  Â  Â  const favs = getFavorites();
Â  Â  Â  if (favs.length === 0) {
Â  Â  Â  Â  alert("ì¦ê²¨ì°¾ê¸°í•œ ë ˆì‹œí”¼ê°€ ì—†ìŠµë‹ˆë‹¤.");
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  const randomMeal = favs[Math.floor(Math.random() * favs.length)];
Â  Â  Â  showDetails(randomMeal);
Â  Â  }

Â  Â  loadCategories();
Â  Â  loadFavorites();
Â  Â  showTodayMeal();
Â  </script>

</body>

</html>
